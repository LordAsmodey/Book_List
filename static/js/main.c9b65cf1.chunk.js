(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(12),i=n.n(a),o=(n(17),n(8)),r=(n(18),n(2)),l=n(5),s=n.n(l),j=n(10),d=n(3),b="http://localhost:4000/books";var u=n(6),h=n(0),O=function(e){var t=e.setBooks,n=e.editedBook,a=e.setEditedBook,i=Object(c.useState)(!1),o=Object(d.a)(i,2),r=o[0],l=o[1],O=Object(c.useState)(!1),m=Object(d.a)(O,2),x=m[0],f=m[1],g=Object(c.useState)(!1),p=Object(d.a)(g,2),v=p[0],N=p[1],S=function(e){0===e.trim().length?l(!0):l(!1)},y=function(){f(!0),n&&!r&&function(e){return fetch("".concat(b,"/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}))}(n).then((function(e){N(!1),a(null),t((function(t){return[].concat(Object(j.a)(t.filter((function(t){return t.id!==e.id}))),[e])}))})).catch((function(){return N(!0)})).finally((function(){f(!1)}))};return Object(h.jsxs)("div",{className:s()("modal",{"is-active":n}),children:[Object(h.jsx)("div",{className:"modal-background"}),Object(h.jsxs)("div",{className:"modal-card",children:[Object(h.jsxs)("header",{className:"modal-card-head",children:[Object(h.jsx)("p",{className:"modal-card-title",children:"Edit book form"}),Object(h.jsx)("button",{type:"button",className:"delete","aria-label":"close",onClick:function(){return a(null)}})]}),Object(h.jsxs)("section",{className:"modal-card-body",children:[v&&Object(h.jsx)("p",{className:"help is-danger",children:"Something went wrong! Try again!"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y()},children:[Object(h.jsxs)("label",{className:"label",htmlFor:"book-title",children:["Enter book title:",Object(h.jsx)("input",{id:"book-title",type:"text",className:s()("input",{"is-danger":0===(null===n||void 0===n?void 0:n.title.length)}),placeholder:"Enter book title",value:(null===n||void 0===n?void 0:n.title)||"",onChange:function(e){S(e.target.value),a((function(t){return Object(u.a)(Object(u.a)({},t),{},{title:e.target.value})}))},required:!0}),!(null===n||void 0===n?void 0:n.title.length)&&Object(h.jsx)("p",{className:"help is-danger",children:"Please enter book title!"})]}),Object(h.jsxs)("label",{htmlFor:"author-name",children:["Enter author name:",Object(h.jsx)("input",{id:"author-name",type:"text",className:s()("input",{"is-danger":0===(null===n||void 0===n?void 0:n.authorName.length)}),placeholder:"Enter author name",value:(null===n||void 0===n?void 0:n.authorName)||"",onChange:function(e){S(e.target.value),a((function(t){return Object(u.a)(Object(u.a)({},t),{},{authorName:e.target.value})}))},required:!0}),!(null===n||void 0===n?void 0:n.authorName.length)&&Object(h.jsx)("p",{className:"help is-danger",children:"Please enter author name!"})]}),Object(h.jsx)("div",{className:"field",children:Object(h.jsxs)("label",{htmlFor:"category",className:"label",children:["Select category",Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("div",{className:"select",children:Object(h.jsxs)("select",{id:"category",value:null===n||void 0===n?void 0:n.category,onChange:function(e){a((function(t){return Object(u.a)(Object(u.a)({},t),{},{category:e.target.value})}))},children:[Object(h.jsx)("option",{children:"Politics"}),Object(h.jsx)("option",{children:"Fantasy"}),Object(h.jsx)("option",{children:"Autobiography"}),Object(h.jsx)("option",{children:"Romance"})]})})})]})}),Object(h.jsxs)("label",{htmlFor:"ISBN",children:["Enter ISBN:",Object(h.jsx)("input",{id:"ISBN",type:"text",className:s()("input",{"is-danger":0===(null===n||void 0===n?void 0:n.ISBN.length)}),placeholder:"Enter ISBN",value:(null===n||void 0===n?void 0:n.ISBN)||"",onChange:function(e){S(e.target.value),a((function(t){return Object(u.a)(Object(u.a)({},t),{},{ISBN:e.target.value})}))},required:!0}),!(null===n||void 0===n?void 0:n.ISBN.length)&&Object(h.jsx)("p",{className:"help is-danger",children:"Please enter book ISBN!"})]})]})]}),Object(h.jsxs)("footer",{className:"modal-card-foot",children:[Object(h.jsx)("button",{type:"button",className:s()("button is-success",{"is-loading":x}),onClick:y,disabled:r,children:"Save changes"}),Object(h.jsx)("button",{type:"button",className:"button",onClick:function(){return a(null)},children:"Cancel"})]})]})]})},m=(n(20),function(){return Object(h.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(h.jsx)("div",{className:"Loader__content"})})}),x=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),o=Object(d.a)(i,2),r=o[0],l=o[1],u=Object(c.useState)(!1),x=Object(d.a)(u,2),f=x[0],g=x[1],p=Object(c.useState)(null),v=Object(d.a)(p,2),N=v[0],S=v[1],y=Object(c.useState)(!1),k=Object(d.a)(y,2),B=k[0],w=k[1];Object(c.useEffect)((function(){l(!0),fetch("".concat(b)).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")})).then((function(e){a(e),w(!1)})).catch((function(){return w(!0)})).finally((function(){return l(!1)}))}),[]);var C=function(e){g(!0),function(e){return fetch("".concat(b,"/").concat(e),{method:"DELETE"}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}))}(e).then((function(){w(!1),a((function(t){return Object(j.a)(t.filter((function(t){return t.id!==e})))}))})).catch((function(){return w(!0)})).finally((function(){return g(!1)}))};return Object(h.jsxs)("div",{children:[r&&Object(h.jsx)(m,{}),!r&&B&&Object(h.jsx)("p",{className:"help is-danger",children:"Something went wrong."}),!r&&0===n.length&&!B&&Object(h.jsx)("p",{className:"help is-info",children:"The list of books is empty! Add something to the list of books."}),!r&&n.length>0&&Object(h.jsxs)("table",{className:"table is-hoverable is-fullwidth",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Book title"}),Object(h.jsx)("th",{children:"Author name"}),Object(h.jsx)("th",{children:"Category"}),Object(h.jsx)("th",{children:Object(h.jsx)("abbr",{title:"International Standard Book Number",children:"ISBN"})}),Object(h.jsx)("th",{children:"Actions"})]})}),Object(h.jsx)("tfoot",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Book title"}),Object(h.jsx)("th",{children:"Author name"}),Object(h.jsx)("th",{children:"Category"}),Object(h.jsx)("th",{children:Object(h.jsx)("abbr",{title:"International Standard Book Number",children:"ISBN"})}),Object(h.jsx)("th",{children:"Actions"})]})}),Object(h.jsx)("tbody",{children:n.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.title}),Object(h.jsx)("td",{children:e.authorName}),Object(h.jsx)("td",{children:e.category}),Object(h.jsx)("td",{children:e.ISBN}),Object(h.jsxs)("td",{children:[Object(h.jsx)("button",{className:"button mr-1 is-info is-light",onClick:function(){return S(e)},type:"button",children:"Edit"}),Object(h.jsx)("button",{className:s()("button is-danger is-light",{"is-loading":f}),onClick:function(){C(e.id)},type:"button",children:"Delete"})]})]},e.id)}))})]}),Object(h.jsx)(O,{setBooks:a,editedBook:N,setEditedBook:S})]})};var f=function(e){var t=e.name,n=e.value,a=e.label,i=void 0===a?t:a,o=e.required,r=void 0!==o&&o,l=e.onChange,j=void 0===l?function(){}:l,b=Object(c.useState)((function(){return"".concat(t,"-").concat(Math.random().toString().slice(2))})),u=Object(d.a)(b,1)[0],O=Object(c.useState)(!1),m=Object(d.a)(O,2),x=m[0],f=m[1],g=x&&r&&!n;return Object(h.jsxs)("div",{className:"field",children:[Object(h.jsx)("label",{className:"label",htmlFor:u,children:i}),Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("input",{id:u,"data-cy":"movie-".concat(t),className:s()("input",{"is-danger":g}),type:"text",placeholder:"Enter ".concat(i),value:n,onChange:function(e){return j(e.target.value)},onBlur:function(){return f(!0)}})}),g&&Object(h.jsx)("p",{className:"help is-danger",children:"".concat(i," is required")})]})},g=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),o=Object(d.a)(i,2),l=o[0],j=o[1],u=Object(c.useState)("Politics"),O=Object(d.a)(u,2),m=O[0],x=O[1],g=Object(c.useState)(""),p=Object(d.a)(g,2),v=p[0],N=p[1],S=Object(c.useState)(!1),y=Object(d.a)(S,2),k=y[0],B=y[1],w=Object(c.useState)(!1),C=Object(d.a)(w,2),E=C[0],I=C[1],A=Object(c.useState)(!1),P=Object(d.a)(A,2),F=P[0],q=P[1],T=Object(c.useMemo)((function(){return 0===n.length&&0===n.length&&0===v.length}),[n,l,v]),D=function(){a(""),j(""),x("Politics"),N("")};return Object(h.jsxs)(h.Fragment,{children:[k&&Object(h.jsx)("p",{className:"help is-danger",children:"Something went wrong! Try again!"}),F&&Object(h.jsx)(r.a,{to:"/",replace:!0}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(h.jsx)(f,{name:"Book title",value:n,label:"Book title",required:!0,onChange:a}),Object(h.jsx)(f,{name:"Author name",value:l,label:"Author name",required:!0,onChange:j}),Object(h.jsx)("div",{className:"field",children:Object(h.jsxs)("label",{htmlFor:"category",className:"label",children:["Select category",Object(h.jsx)("div",{className:"control",children:Object(h.jsx)("div",{className:"select",children:Object(h.jsxs)("select",{id:"category",value:m,onChange:function(e){return x(e.target.value)},children:[Object(h.jsx)("option",{children:"Politics"}),Object(h.jsx)("option",{children:"Fantasy"}),Object(h.jsx)("option",{children:"Autobiography"}),Object(h.jsx)("option",{children:"Romance"})]})})})]})}),Object(h.jsx)(f,{name:"Enter ISBN",value:v,label:"ISBN",required:!0,onChange:N})]}),Object(h.jsxs)("div",{className:"field is-grouped is-grouped-centered mt-3",children:[Object(h.jsx)("p",{className:"control",children:Object(h.jsx)("button",{type:"button",className:s()("button is-primary",{"is-loading":E}),disabled:T,onClick:function(){var e;I(!0),T||(e={title:n,authorName:l,category:m,ISBN:v},fetch("".concat(b),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong")}))).then((function(){q(!0),B(!1),D()})).catch((function(){return B(!0)})).finally((function(){I(!1)}))},children:"Submit"})}),Object(h.jsx)("p",{className:"control",children:Object(h.jsx)("button",{type:"button",className:"button is-light",onClick:function(){return D()},children:"Clear form"})})]})]})},p=function(){return Object(h.jsx)("h1",{children:"Page not found!"})},v=function(){var e=Object(r.f)();return Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)("div",{className:"tabs",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{className:s()({"is-active":"/"===e.pathname}),children:Object(h.jsx)(o.b,{to:"/",children:"Dashboard"})}),Object(h.jsx)("li",{className:s()({"is-active":"/add"===e.pathname}),children:Object(h.jsx)(o.b,{to:"add",children:"Add new book"})})]})}),Object(h.jsxs)(r.d,{children:[Object(h.jsx)(r.b,{path:"/",element:Object(h.jsx)(x,{})}),Object(h.jsx)(r.b,{path:"add",element:Object(h.jsx)(g,{})}),Object(h.jsx)(r.b,{path:"*",element:Object(h.jsx)(p,{})})]})]})};i.a.render(Object(h.jsx)(o.a,{children:Object(h.jsx)(v,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.c9b65cf1.chunk.js.map